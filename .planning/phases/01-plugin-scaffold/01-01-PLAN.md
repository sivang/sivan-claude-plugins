---
phase: 01-plugin-scaffold
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - session-workflow/.claude-plugin/plugin.json
  - session-workflow/commands/doomsday.md
  - session-workflow/commands/resurrect.md
  - session-workflow/skills/doomsday/SKILL.md
  - session-workflow/skills/resurrect/SKILL.md
  - site-audit/.claude-plugin/plugin.json
autonomous: true

must_haves:
  truths:
    - "session-workflow plugin files exist under session-workflow/ subdirectory"
    - "Root .claude-plugin/ directory no longer exists"
    - "site-audit has a valid plugin.json manifest"
    - "Git history is preserved for moved files"
  artifacts:
    - path: "session-workflow/.claude-plugin/plugin.json"
      provides: "Session workflow plugin manifest"
      contains: "session-workflow"
    - path: "session-workflow/commands/doomsday.md"
      provides: "Doomsday command definition"
      contains: "doomsday"
    - path: "session-workflow/commands/resurrect.md"
      provides: "Resurrect command definition"
      contains: "resurrect"
    - path: "session-workflow/skills/doomsday/SKILL.md"
      provides: "Doomsday skill implementation"
      contains: "End of Session Shutdown"
    - path: "session-workflow/skills/resurrect/SKILL.md"
      provides: "Resurrect skill implementation"
      contains: "Session Resurrection"
    - path: "site-audit/.claude-plugin/plugin.json"
      provides: "Site audit plugin manifest"
      contains: "site-audit"
  key_links:
    - from: "session-workflow/commands/doomsday.md"
      to: "session-workflow/skills/doomsday/SKILL.md"
      via: "plugin convention (command name matches skill directory)"
      pattern: "name: doomsday"
    - from: "session-workflow/commands/resurrect.md"
      to: "session-workflow/skills/resurrect/SKILL.md"
      via: "plugin convention (command name matches skill directory)"
      pattern: "name: resurrect"
---

<objective>
Restructure the repository from a single flat plugin layout to a multi-plugin layout with separate subdirectories, and create the site-audit plugin manifest.

Purpose: Enables multiple independent plugins (session-workflow and site-audit) to coexist in one repository, each with their own plugin.json recognized by Claude Code.
Output: session-workflow/ and site-audit/ subdirectories with proper plugin structure.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-plugin-scaffold/01-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Move session-workflow files into subdirectory</name>
  <files>
    session-workflow/.claude-plugin/plugin.json
    session-workflow/commands/doomsday.md
    session-workflow/commands/resurrect.md
    session-workflow/skills/doomsday/SKILL.md
    session-workflow/skills/resurrect/SKILL.md
  </files>
  <action>
    Use git mv to relocate all existing plugin files into a session-workflow/ subdirectory. This preserves git history.

    Steps:
    1. Create the target directory structure:
       - mkdir -p session-workflow/.claude-plugin
       - mkdir -p session-workflow/commands
       - mkdir -p session-workflow/skills/doomsday
       - mkdir -p session-workflow/skills/resurrect

    2. Move files using git mv:
       - git mv .claude-plugin/plugin.json session-workflow/.claude-plugin/plugin.json
       - git mv commands/doomsday.md session-workflow/commands/doomsday.md
       - git mv commands/resurrect.md session-workflow/commands/resurrect.md
       - git mv skills/doomsday/SKILL.md session-workflow/skills/doomsday/SKILL.md
       - git mv skills/resurrect/SKILL.md session-workflow/skills/resurrect/SKILL.md

    3. Remove now-empty directories:
       - Remove .claude-plugin/ (now empty)
       - Remove commands/ (now empty)
       - Remove skills/doomsday/ and skills/resurrect/ and skills/ (now empty)

    Do NOT modify file contents. Only move files.
  </action>
  <verify>
    - ls session-workflow/.claude-plugin/plugin.json (exists)
    - ls session-workflow/commands/doomsday.md (exists)
    - ls session-workflow/commands/resurrect.md (exists)
    - ls session-workflow/skills/doomsday/SKILL.md (exists)
    - ls session-workflow/skills/resurrect/SKILL.md (exists)
    - ls .claude-plugin/ 2>&1 | grep "No such file" (old location gone)
    - git status shows renames (not delete+add)
  </verify>
  <done>All session-workflow files live under session-workflow/ subdirectory. Old root-level .claude-plugin/, commands/, and skills/ directories no longer exist. Git tracks the moves as renames.</done>
</task>

<task type="auto">
  <name>Task 2: Create site-audit plugin manifest</name>
  <files>
    site-audit/.claude-plugin/plugin.json
  </files>
  <action>
    Create the site-audit plugin directory and its plugin.json manifest.

    1. Create directory: mkdir -p site-audit/.claude-plugin

    2. Create site-audit/.claude-plugin/plugin.json with this exact content:
    ```json
    {
      "name": "site-audit",
      "version": "0.1.0",
      "description": "Crawl a website and produce a comprehensive quality audit covering broken links, spelling errors, console errors, and visual issues",
      "author": {
        "name": "Sivan Gr√ºnberg",
        "email": "sivan@vitakka.co",
        "url": "https://vitakka.co"
      }
    }
    ```

    Use version 0.1.0 (not 1.0.0) since this is initial scaffold, not a released plugin.
  </action>
  <verify>
    - cat site-audit/.claude-plugin/plugin.json | python3 -m json.tool (valid JSON)
    - grep '"name": "site-audit"' site-audit/.claude-plugin/plugin.json (correct name)
    - grep '"version": "0.1.0"' site-audit/.claude-plugin/plugin.json (correct version)
  </verify>
  <done>site-audit/.claude-plugin/plugin.json exists with valid manifest containing name, version, description, and author fields.</done>
</task>

</tasks>

<verification>
- Repository has two plugin subdirectories: session-workflow/ and site-audit/
- Each has a .claude-plugin/plugin.json manifest
- No plugin files remain at the repo root
- Git history preserved for session-workflow files (git log --follow shows history)
</verification>

<success_criteria>
1. session-workflow/ contains all original plugin files in correct structure
2. site-audit/ contains a valid plugin.json manifest
3. Root-level .claude-plugin/, commands/, skills/ directories are gone
4. git status shows clean renames, not unrelated adds/deletes
</success_criteria>

<output>
After completion, create `.planning/phases/01-plugin-scaffold/01-01-SUMMARY.md`
</output>
